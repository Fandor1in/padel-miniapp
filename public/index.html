<!doctype html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Telegram говорит подключать этот скрипт в head до остальных -->
    <script src="https://telegram.org/js/telegram-web-app.js?59"></script>
    <title>Padel League</title>
</head>

<body style="font-family: sans-serif; padding: 16px;">
    <h2>Padel League Mini App</h2>
    <pre id="out">Loading…</pre>

    <script>
        const out = document.getElementById("out");
        const tg = window.Telegram?.WebApp;

        if (!tg) {
            out.textContent = "Открой это из Telegram (Mini App), а не в обычном браузере.";
        } else {
            // initData нужно отправлять на сервер для проверки :contentReference[oaicite:4]{index=4}
            fetch("/api/auth/telegram", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ initData: tg.initData })
            })
                .then(r => r.json())
                .then(data => out.textContent = JSON.stringify(data, null, 2))
                .catch(err => out.textContent = String(err));
        }
    </script>
</body>

</html>